# Production Environment Configuration
# Blockchain EMR System - Production Settings

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
NODE_ENV=production
PORT=3000
API_VERSION=v1
LOG_LEVEL=warn

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
MYSQL_HOST=mysql-master
MYSQL_PORT=3306
MYSQL_DATABASE=blockchain_emr
MYSQL_USER=emr_user
MYSQL_PASSWORD=${MYSQL_PASSWORD}
MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
MYSQL_CONNECTION_LIMIT=100
MYSQL_TIMEOUT=60000

MYSQL_SLAVE_HOST=mysql-slave
MYSQL_SLAVE_PORT=3306
MYSQL_REPLICATION_USER=replicator
MYSQL_REPLICATION_PASSWORD=${MYSQL_REPLICATION_PASSWORD}

REDIS_HOST=redis-master
REDIS_PORT=6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_TTL=3600

# =============================================================================
# BLOCKCHAIN CONFIGURATION
# =============================================================================
FABRIC_NETWORK_NAME=blockchain-emr-network
FABRIC_CHANNEL_NAME=emr-channel
FABRIC_CHAINCODE_NAME=emr-chaincode
FABRIC_CHAINCODE_VERSION=1.0

FABRIC_PEER_ENDPOINT=peer0.org1.example.com:7051
FABRIC_PEER_TLS_ENABLED=true
FABRIC_ORDERER_ENDPOINT=orderer.example.com:7050
FABRIC_CA_ENDPOINT=ca.org1.example.com:7054
FABRIC_CA_ADMIN_USER=admin
FABRIC_CA_ADMIN_PASSWORD=${FABRIC_CA_ADMIN_PASSWORD}

# =============================================================================
# IPFS CONFIGURATION
# =============================================================================
IPFS_HOST=ipfs-0
IPFS_PORT=5001
IPFS_PROTOCOL=http
IPFS_TIMEOUT=30000

IPFS_CLUSTER_HOST=ipfs-cluster-0
IPFS_CLUSTER_PORT=9094
IPFS_CLUSTER_SECRET=${IPFS_CLUSTER_SECRET}
IPFS_CLUSTER_REPLICATION_FACTOR_MIN=3
IPFS_CLUSTER_REPLICATION_FACTOR_MAX=5

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=blockchain-emr-system
JWT_AUDIENCE=emr-users

ENCRYPTION_KEY=${ENCRYPTION_KEY}
MASTER_ENCRYPTION_KEY=${MASTER_ENCRYPTION_KEY}
BCRYPT_ROUNDS=12

SESSION_SECRET=${SESSION_SECRET}
SESSION_TIMEOUT=28800
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

CORS_ORIGIN=${CORS_ORIGIN}
CORS_CREDENTIALS=true

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================
LOG_FORMAT=combined
LOG_FILE_PATH=/app/logs/application.log
LOG_ERROR_FILE_PATH=/app/logs/error.log
LOG_MAX_SIZE=50m
LOG_MAX_FILES=10

PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_METRICS_INTERVAL=5000
PERFORMANCE_TPS_TARGET=1000
PERFORMANCE_LATENCY_TARGET=100
PERFORMANCE_ERROR_RATE_TARGET=1

HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

METRICS_ENABLED=true
METRICS_PORT=9090
PROMETHEUS_ENABLED=true

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
STORAGE_L1_ENABLED=true
STORAGE_L1_TYPE=redis
STORAGE_L1_TTL=3600
STORAGE_L1_MAX_SIZE=2GB

STORAGE_L2_ENABLED=true
STORAGE_L2_TYPE=mysql
STORAGE_L2_TTL=86400
STORAGE_L2_MAX_SIZE=500GB

STORAGE_L3_ENABLED=true
STORAGE_L3_TYPE=ipfs
STORAGE_L3_TTL=2592000
STORAGE_L3_MAX_SIZE=10TB

STORAGE_L4_ENABLED=true
STORAGE_L4_TYPE=cold_storage
STORAGE_L4_TTL=31536000
STORAGE_L4_PROVIDER=aws_s3

UPLOAD_MAX_FILE_SIZE=100MB
UPLOAD_ALLOWED_TYPES=pdf,jpg,jpeg,png,dcm,txt,doc,docx
UPLOAD_TEMP_DIR=/app/temp/uploads
UPLOAD_VIRUS_SCAN_ENABLED=true

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
EMAIL_SERVICE_ENABLED=true
EMAIL_SMTP_HOST=${EMAIL_SMTP_HOST}
EMAIL_SMTP_PORT=587
EMAIL_SMTP_SECURE=true
EMAIL_SMTP_USER=${EMAIL_SMTP_USER}
EMAIL_SMTP_PASSWORD=${EMAIL_SMTP_PASSWORD}
EMAIL_FROM_ADDRESS=${EMAIL_FROM_ADDRESS}
EMAIL_FROM_NAME=Blockchain EMR System

SMS_SERVICE_ENABLED=true
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=${SMS_ACCOUNT_SID}
SMS_AUTH_TOKEN=${SMS_AUTH_TOKEN}
SMS_FROM_NUMBER=${SMS_FROM_NUMBER}

AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=${AWS_REGION}
AWS_S3_BUCKET=${AWS_S3_BUCKET}

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================
DEV_MODE=false
DEV_MOCK_BLOCKCHAIN=false
DEV_MOCK_IPFS=false
DEV_SEED_DATA=false
DEV_AUTO_MIGRATE=false

DEBUG_ENABLED=false
DEBUG_SQL_QUERIES=false
DEBUG_PERFORMANCE=false

PROD_FORCE_HTTPS=true
PROD_TRUST_PROXY=true
PROD_HELMET_ENABLED=true
PROD_COMPRESSION_ENABLED=true

PROD_CLUSTER_MODE=true
PROD_WORKER_PROCESSES=auto
PROD_KEEP_ALIVE_TIMEOUT=65000
PROD_HEADERS_TIMEOUT=66000

PROD_APM_ENABLED=true
PROD_APM_SERVICE_NAME=blockchain-emr
PROD_APM_SERVER_URL=${APM_SERVER_URL}

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_MULTI_FACTOR_AUTH=true
FEATURE_BIOMETRIC_AUTH=true
FEATURE_BLOCKCHAIN_ANALYTICS=true
FEATURE_AI_DIAGNOSTICS=false
FEATURE_TELEMEDICINE=true
FEATURE_MOBILE_APP=true

# =============================================================================
# COMPLIANCE AND AUDIT
# =============================================================================
AUDIT_ENABLED=true
AUDIT_LOG_ALL_REQUESTS=true
AUDIT_LOG_SENSITIVE_DATA=false
AUDIT_RETENTION_DAYS=2555

HIPAA_COMPLIANCE=true
GDPR_COMPLIANCE=true
DATA_RETENTION_POLICY=7_years
ANONYMIZATION_ENABLED=true

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true

DR_ENABLED=true
DR_REPLICA_HOST=${DR_REPLICA_HOST}
DR_SYNC_INTERVAL=3600
DR_FAILOVER_THRESHOLD=300

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================
FHIR_ENABLED=true
FHIR_SERVER_URL=${FHIR_SERVER_URL}
FHIR_VERSION=R4

LAB_INTEGRATION_ENABLED=true
LAB_API_ENDPOINT=${LAB_API_ENDPOINT}
LAB_API_KEY=${LAB_API_KEY}

PHARMACY_INTEGRATION_ENABLED=true
PHARMACY_API_ENDPOINT=${PHARMACY_API_ENDPOINT}
PHARMACY_API_KEY=${PHARMACY_API_KEY}

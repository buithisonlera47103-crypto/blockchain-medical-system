# EMR Blockchain Production Environment Configuration
# Copy this file to .env.production and update with actual production values
# Ensure all sensitive values are properly secured

# Application Environment
NODE_ENV=production
PORT=3001
API_VERSION=v1

# Database Configuration (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=emr_blockchain
DB_USER=emr_user
DB_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
DB_SSL=true
DB_POOL_MIN=5
DB_POOL_MAX=50

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_DB=0

# Security Configuration
JWT_SECRET=CHANGE_THIS_JWT_SECRET_32_CHARACTERS_MINIMUM
ENCRYPTION_KEY=CHANGE_THIS_32_BYTE_ENCRYPTION_KEY_HERE
BCRYPT_ROUNDS=12

# TLS Configuration
TLS_ENABLED=true
TLS_CERT_PATH=/etc/ssl/certs/emr-blockchain.crt
TLS_KEY_PATH=/etc/ssl/private/emr-blockchain.key
TLS_CA_PATH=/etc/ssl/certs/ca-bundle.crt
TLS_REJECT_UNAUTHORIZED=true

# HSM Configuration
HSM_ENABLED=true
HSM_LIBRARY_PATH=/usr/lib/softhsm/libsofthsm2.so
HSM_SLOT=0
HSM_PIN=CHANGE_THIS_HSM_PIN
HSM_KEY_LABEL=emr-blockchain-key

# Hyperledger Fabric Configuration
FABRIC_NETWORK_PATH=/opt/emr-blockchain/fabric-network
FABRIC_WALLET_PATH=/opt/emr-blockchain/fabric-network/wallets
FABRIC_CONNECTION_PROFILE=/opt/emr-blockchain/fabric-network/connection-profile.json
FABRIC_CHANNEL_NAME=emr-channel
FABRIC_CHAINCODE_NAME=emr-chaincode
FABRIC_MSP_ID=Hospital1MSP
FABRIC_USER_ID=admin

# IPFS Configuration
IPFS_URL=http://localhost:8090
IPFS_CLUSTER_ENABLED=true
IPFS_CLUSTER_URL=http://localhost:9094
IPFS_TIMEOUT=30000
IPFS_RETRY_ATTEMPTS=3
IPFS_RETRY_DELAY=1000
IPFS_REPLICATION_FACTOR=2

# Monitoring Configuration
METRICS_ENABLED=true
METRICS_PORT=9464
PROMETHEUS_ENABLED=true
JAEGER_ENABLED=true
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/emr-blockchain/app.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# Audit Logging (HIPAA Compliance)
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=/var/log/emr-blockchain/audit.log
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for HIPAA compliance

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=1000
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGIN=https://emr.yourdomain.com
CORS_CREDENTIALS=true

# Session Configuration
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_32_CHARACTERS
SESSION_TIMEOUT=3600000  # 1 hour in milliseconds
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# File Upload Configuration
UPLOAD_MAX_SIZE=104857600  # 100MB
UPLOAD_ALLOWED_TYPES=pdf,jpg,jpeg,png,dicom,dcm
UPLOAD_TEMP_DIR=/tmp/emr-uploads
UPLOAD_VIRUS_SCAN_ENABLED=true

# Email Configuration (for notifications)
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=CHANGE_THIS_SMTP_PASSWORD
EMAIL_FROM=EMR Blockchain System <noreply@yourdomain.com>

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=90
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_S3_BUCKET=emr-blockchain-backups
BACKUP_S3_REGION=us-east-1

# Performance Configuration
WORKER_PROCESSES=4
MAX_CONCURRENT_REQUESTS=1000
REQUEST_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=5000

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# External Services
EXTERNAL_API_TIMEOUT=10000
EXTERNAL_API_RETRIES=3
EXTERNAL_API_RETRY_DELAY=1000

# Development/Debug (should be false in production)
DEBUG_ENABLED=false
SWAGGER_ENABLED=false
PROFILING_ENABLED=false

# Compliance Configuration
HIPAA_COMPLIANCE_MODE=true
DATA_RETENTION_YEARS=7
AUDIT_TRAIL_ENABLED=true
ENCRYPTION_AT_REST=true
ENCRYPTION_IN_TRANSIT=true

# Disaster Recovery
DR_ENABLED=true
DR_BACKUP_FREQUENCY=daily
DR_REPLICATION_ENABLED=true
DR_FAILOVER_TIMEOUT=300000  # 5 minutes

# Alerting Configuration
ALERT_EMAIL_ENABLED=true
ALERT_EMAIL_RECIPIENTS=ops@yourdomain.com,security@yourdomain.com
ALERT_SLACK_ENABLED=true
ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
ALERT_PAGERDUTY_ENABLED=true
ALERT_PAGERDUTY_KEY=YOUR_PAGERDUTY_INTEGRATION_KEY

# Load Balancer Configuration (if using external load balancer)
LOAD_BALANCER_ENABLED=false
LOAD_BALANCER_HEALTH_CHECK_PATH=/api/v1/health
LOAD_BALANCER_TIMEOUT=30000

# CDN Configuration (if using CDN for static assets)
CDN_ENABLED=false
CDN_URL=https://cdn.yourdomain.com
CDN_CACHE_TTL=86400  # 24 hours

# Geographic Configuration
TIMEZONE=UTC
LOCALE=en-US
CURRENCY=USD

# Legal and Compliance
TERMS_OF_SERVICE_URL=https://yourdomain.com/terms
PRIVACY_POLICY_URL=https://yourdomain.com/privacy
GDPR_COMPLIANCE=true
CCPA_COMPLIANCE=true

# Feature Flags
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_REAL_TIME_NOTIFICATIONS=true
FEATURE_MOBILE_API=true
FEATURE_THIRD_PARTY_INTEGRATIONS=false

# Cache Configuration
CACHE_TTL=3600  # 1 hour
CACHE_MAX_SIZE=1000
CACHE_ENABLED=true

# WebSocket Configuration
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=3002
WEBSOCKET_CORS_ORIGIN=https://emr.yourdomain.com

# API Documentation
API_DOCS_ENABLED=false  # Disable in production for security
API_DOCS_PATH=/api/docs

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000  # 1 year
CSP_ENABLED=true
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_CONNECT_SRC='self'
CSP_FONT_SRC='self'
CSP_OBJECT_SRC='none'
CSP_MEDIA_SRC='self'
CSP_FRAME_SRC='none'
